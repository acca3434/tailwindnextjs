# 모노레포(Monorepo)란 무엇인가요?

**모노레포(Monorepo)**는 하나의 코드베이스에 여러 다른 앱과 패키지를 모은 것입니다.

다른 설정인 **폴리레포(Polyrepo)**는 여러 코드베이스로 나뉘어 따로 출판되고 버전이 관리됩니다.

## 코드 공유

### _폴리레포에서_

폴리레포 설정에서 애플리케이션 간 코드 공유 과정은 상대적으로 시간이 많이 소요됩니다.

가령, 세 개의 별도 리포지토리가 있다고 상상해보세요 - 앱(app), 문서(docs), 공유패키지(shared-utils). 앱과 문서는 둘 다 npm에 패키지로 출판된 shared-utils에 의존합니다.

만약 shared-utils에서 버그가 앱과 문서에서 심각한 이슈를 일으키고 있다면, 다음과 같은 과정이 필요합니다:

1. shared-utils에서 오류를 수정하는 커밋 생성
2. shared-utils 내에서 npm에 출판 작업 실행
3. 앱에서 shared-utils 의존성 버전 업데이트하는 커밋 생성
4. 문서에서 shared-utils 의존성 버전 업데이트하는 커밋 생성
5. 앱과 문서가 이제 배포 준비 완료

앱들이 shared-utils에 의존하는 수가 많아질수록 이 과정은 매우 번거로울 수 있습니다.

### 모노레포에서

모노레포 설정에서는 shared-utils가 앱과 문서와 동일한 코드베이스에 있게 됩니다. 이로써 과정이 매우 간단해집니다:

1. shared-utils에서 오류를 수정하는 커밋 생성
2. 앱과 문서가 이제 배포 준비 완료

버전 관리가 필요하지 않습니다. 왜냐하면 앱과 문서는 npm의 shared-utils 버전이 아닌 코드베이스에 있는 버전에 의존하기 때문입니다.

이는 여러 앱과 패키지의 버그를 동시에 수정하는 단일 커밋을 만들 수 있게 하므로 팀에게 속도 측면에서 큰 이득이 될 수 있습니다.

**모노레포는 어떻게 작동하나요?**
모노레포의 주요 구성 요소는 **워크스페이스(Workspace)**입니다. 빌드하는 각 애플리케이션 및 패키지는 자체 워크스페이스에 있으며, 자체 package.json을 가지고 있습니다. 가이드에서 알 수 있듯이, 워크스페이스는 서로 의존할 수 있습니다. 따라서 문서 워크스페이스는 shared-utils에 의존할 수 있습니다.

pnpm install

_apps/docs/package.json_

```json
{
    "dependencies": {
        "shared-utils": "workspace:*"
    }
}
```

워크스페이스는 종속성을 설치하는 CLI와 동일한 CLI에 의해 관리됩니다.

**루트 워크스페이스**
또한 코드베이스의 루트 폴더에 있는 package.json에서 **루트 워크스페이스(Root Workspace)**가 있습니다. 이는 다음과 같은 용도로 유용합니다:

-   모노레포 전체에서 공통적으로 사용되는 종속성 명시
-   개별 워크스페이스뿐만 아니라 모노레포 전체에 대한 작업 추가
-   모노레포 사용 방법에 대한 문서 추가
