# Monorepo에서 코드 공유하기\*\*

## 패키지란 무엇인가요?##

Monorepo에서 '패키지'는 두 가지 의미를 갖습니다. 이는 다음 중 하나를 나타낼 수 있습니다.

1. npm과 같은 패키지 매니저를 통해 node_modules에 다운로드하는 파일 세트.
2. 애플리케이션 간에 공유될 수 있는 코드가 포함된 작업 영역 - 일반적으로 /packages 내부에 위치하는 관례상의 경로.

패키지 설치에 대해서는 이미 익숙할 것이지만 작업 영역에 대해서는 아마도 덜 익숙할 것입니다. 그러나 이 둘은 매우 유사합니다. 패키지는 단순히 공유 코드의 일부일 뿐입니다. 설치된 패키지는 node_modules에 있고 로컬 패키지는 작업 영역에 있습니다(일반적으로 /packages 폴더 내).

## 패키지의 해부학

각 패키지에는 package.json이 포함되어 있습니다. 이를 사용하여 애플리케이션에서 종속성 및 스크립트를 관리하는 데 익숙할 것입니다. 그러나 여기에 main 및 name 필드가 있다는 것에 주목해야 합니다.

```json
// packages/my-lib/package.json
{
    "name": "my-lib",
    "main": "./index.js"
}
```

이러한 두 필드는 패키지가 가져오기될 때 해당 패키지의 동작을 결정하는 데 중요합니다. 예를 들어, index.js에 일부 내보내기가 있는 경우:

```javascript
// packages/my-lib/index.js
export const myFunc = () => {
    console.log('Hello!')
}
```

그리고 이 파일을 애플리케이션에 가져온다면:

```javascript
// apps/web/pages/index.jsx
import { myFunc } from 'my-lib'

myFunc() // Hello!
```

그러면 우리는 애플리케이션 내에서 my-lib 폴더 내의 코드를 사용할 수 있습니다. 각 패키지는 package.json 내에서 name 및 main을 가지고 있어야 합니다.

패키지의 package.json에서의 해결(resolution)은 매우 복잡한 주제이며 여기서는 충분히 다룰 수 없습니다. 패키지의 다른 필드들은 패키지가 어떻게 가져와지는지에 따라 main보다 우선할 수 있습니다. 패키지 해상도에 대한 자세한 내용은 npm 문서를 확인하세요.

**다음 단계**
우리는 두 가지 스타일의 패키지를 소개할 것입니다 - 내부 패키지(internal packages)와 외부 패키지(external packages):

1. **내부 패키지**는 주로 해당 monorepo에서만 사용될 것으로 예상됩니다. 이러한 패키지는 단순하게 설정되어 있으며 프로젝트가 닫혀 있을 경우에 가장 유용할 것입니다.

2. **외부 패키지**는 번들로 묶여 패키지 레지스트리로 전송됩니다. 이는 디자인 시스템, 공유 유틸리티 라이브러리 또는 오픈 소스 작업과 관련하여 유용합니다. 그러나 이는 번들링, 버전 관리 및 게시와 관련하여 더 많은 복잡성을 도입합니다.

마지막으로 업데이트: 2022년 11월 1일
