# 작업 건너뛰기

작업 캐싱은 작업을 현저하게 가속화할 수 있지만, npx turbo-ignore를 사용하여 더 나은 성능을 얻을 수 있습니다. 워크스페이스가 코드 변경에 영향을 받지 않는 경우 작업을 완전히 실행하는 것을 건너뛸 수 있습니다.

예를 들어, 코드 변경이 웹 애플리케이션 또는 해당 패키지 종속성에 영향을 미치지 않는 경우 웹 워크스페이스의 단위 테스트를 건너뛰고 싶을 수 있습니다. 원격 캐싱을 이미 사용하고 있다면 캐시 히트를 얻을 수 있겠지만, 여전히 CI 컨테이너를 프로비저닝하고 npm 종속성을 설치하며 기타 시간이 걸리는 작업이 수행됩니다.

이러한 작업이 필요한지 여부를 빠르게 확인할 수 있는 것이 이상적입니다.

레포를 체크아웃한 후에 다른 작업이 진행되기 전에 몇 초 동안 웹 테스트가 부모 커밋 이후에 변경되었는지 확인할 수 있습니다.

```bash
npx turbo-ignore web --task=test
```

이 명령은 다음과 같은 작업을 수행합니다.

1.  웹 워크스페이스에 대한 필터링
2.  부모 커밋과 비교하여 테스트 작업에 대한 건조한 출력 생성
3.  출력을 파싱하여 변경된 패키지를 결정
4.  변경 사항이 감지되면 1 코드로 종료, 그렇지 않으면 0으로 종료

이 작업에 대해 전체 Turbo 캐시를 얻을 수 있었을 것이지만, 다른 CI를 실행하는 데 필요한 모든 설정 작업으로 시간을 절약했습니다.

## turbo-ignore 사용하기

변경 사항을 스스로 확인하려면 먼저 git 히스토리가 해당 기기에 있는지 확인하세요. 그런 다음 npx turbo-ignore를 실행하세요.

turbo-ignore는 --filter 및 --dry=json 플래그의 조합을 사용하여 현재 커밋의 부모 커밋까지 변경 사항을 찾아 영향을받는 패키지를 식별합니다. 기본적으로 turbo-ignore는 현재 작업 디렉토리에서 빌드 작업에 대한 차이를 찾지만 플래그를 사용하여이 동작을 사용자 정의할 수 있습니다.

다음은 빌드 및 실행 될 명령의 예입니다.

```bash
npx turbo run build --filter=@example/web...3c8387ffd98b751305fe3f0284befdd00cbd4610 --dry=json
```

드라이런은 빌드 작업을 실행하지 않습니다. 대신 몇 초 만에 코드 변경이 빌드(또는 다른 작업)에 영향을 미칠지 확인합니다.

turbo-ignore가 작업을 건너 뛸 수 있다고 판단하면 프로세스를 0 코드로 종료합니다. 변경 사항이 발견되면 프로세스는 1로 종료됩니다.

Vercel에서는 이전에 배포 된 SHA가 부모 커밋 대신 사용됩니다.

## 동작 사용자 정의

작업 옵션을 지정하려면 명령에 워크스페이스를 추가하세요.

```bash
npx turbo-ignore web
```

여기서 웹은 기본 빌드 작업을 실행하는 워크스페이스의 이름입니다.

작업을 변경하려면 --task 플래그를 사용하여 turbo-ignore가 호출 할 명령의 작업을 지정할 수 있습니다.

## Vercel에서 turbo-ignore 사용하기

Vercel에서 npx turbo-ignore를 사용하려면 [무시된 빌드 단계 기능](https://vercel.com/docs/projects/overview#ignored-build-step)을 사용할 수 있습니다. Vercel은 turbo-ignore를 성공적으로 실행하기 위한 올바른 인수를 자동으로 추론합니다.

## 동작 사용자 정의

Vercel에서는 기본 비교가 사용 불가능한 경우 Vercel에 대한 git ref를 지정할 수 있도록 `--fallback` 플래그를 지정할 수 있습니다. 기본적으로 Vercel은 최근에 배포 된 SHA와 비교하므로 이는 브랜치에 대한 첫 번째 커밋에 대한 배포를 피하는 데 유용합니다.
