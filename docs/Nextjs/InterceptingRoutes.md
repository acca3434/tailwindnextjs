## 매처?(matcher)

"매처(matcher)"는 라우트 패턴 또는 URL 경로를 검사하고 특정 라우트로 매칭시키는 규칙 또는 함수를 가리킵니다. 매처는 주로 웹 애플리케이션의 라우팅 시스템에서 사용됩니다.

매처는 다음과 같은 목적으로 사용될 수 있습니다:

1. **라우트 매칭**: 특정 URL 경로 또는 라우트 패턴과 일치하는 라우트를 결정합니다. 매처는 주어진 URL이 어떤 라우트에 해당하는지 확인하는 데 사용됩니다.

2. **라우트 처리**: 매처는 일치하는 라우트를 처리하고 관련된 동작을 수행할 수 있습니다. 예를 들어, 특정 라우트에 대한 컴포넌트를 렌더링하거나 데이터를 검색하는 등의 작업을 수행할 수 있습니다.

3. **매개변수 추출**: 일치하는 URL에서 매개변수를 추출할 수 있습니다. 예를 들어, /user/123 경로에서 123과 같은 사용자 ID를 추출할 수 있습니다.

4. **라우트 보호**: 매처는 특정 조건을 충족하지 않는 경우 라우트를 보호하는 데 사용될 수 있습니다. 예를 들어, 인증되지 않은 사용자가 특정 라우트에 액세스하는 것을 막을 수 있습니다.

매처는 라우팅 라이브러리 또는 프레임워크에 따라 다를 수 있으며, 일반적으로 URL 경로 또는 라우트 패턴을 정의하고 해당 패턴에 따라 라우트를 처리하거나 매핑하는데 사용됩니다.

## 라우트 가로채기

라우트 가로채기는 현재 레이아웃 내에서 애플리케이션의 다른 부분에서 라우트를 불러오는 것을 허용합니다. 이 라우팅 패러다임은 사용자가 다른 컨텍스트로 전환하지 않고도 라우트의 내용을 표시하고자 할 때 유용합니다.

예를 들어, 피드에서 사진을 클릭할 때, 해당 사진을 피드 위에 오버레이하는 모달에서 표시할 수 있습니다.  
이 경우 Next.js는 /photo/123 라우트를 가로채어 URL을 가려서 /feed 위에 오버레이합니다.

<img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Fintercepting-routes-soft-navigate.png&w=1920&q=75&dpl=dpl_7sYJnsycDVdcxq5Fb62iEKdyeFjP">

## 라우트 가로채기 소프트 네비게이션

하지만, 공유 가능한 URL을 클릭하거나 페이지를 새로 고침하여 사진으로 이동할 때, 모달 대신 전체 사진 페이지를 렌더링해야 합니다. 라우트 가로채기가 발생하지 않아야 합니다.

## 라우트 가로채기 하드 네비게이션

### 관례(Convention)

라우트 가로채기는 상대 경로 규칙인 ../와 유사한 (..) 규칙을 사용하여 정의할 수 있습니다. 이 규칙은 세그먼트를 위한 것입니다.

다음을 사용할 수 있습니다:

(.) 동일 레벨의 세그먼트와 일치
(..) 한 레벨 위의 세그먼트와 일치
(..)(..) 두 레벨 위의 세그먼트와 일치
(...) 루트 앱 디렉토리에서 세그먼트와 일치

예를 들어, 피드 세그먼트 내에서 사진 세그먼트를 가로채기 위해 (..)photo 디렉토리를 만들 수 있습니다.

## 라우트 가로채기 폴더 구조

<img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Fintercepted-routes-files.png&w=1920&q=75&dpl=dpl_7sYJnsycDVdcxq5Fb62iEKdyeFjP">

> (..) 규칙은 파일 시스템이 아니라 라우트 세그먼트를 기반으로 합니다.

## 예시

### 모달

라우트 가로채기는 병렬 라우트와 함께 사용하여 모달을 생성하는 데 사용할 수 있습니다.

-   이 패턴을 사용하여 모달을 생성하면 모달 작업 시 발생하는 일반적인 문제를 극복할 수 있습니다.
-   이로써 모달 콘텐츠를 URL을 통해 공유할 수 있게 되며, 페이지가 새로 고침되면 모달을 닫지 않고 컨텍스트를 유지할 수 있습니다.
-   또한 이전 라우트로 이동하는 대신 백워드 네비게이션을 통해 모달을 닫고, 포워드 네비게이션을 통해 모달을 다시 열 수 있습니다.

<img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Fintercepted-routes-modal-example.png&w=1920&q=75&dpl=dpl_8CeX8UeiiNQPo8p24nBLbqbYUU6D">

## 라우트 가로채기 모달 예제

위 예제에서는 @modal이 슬롯이기 때문에 사진 세그먼트의 경로는 (..) 매처를 사용할 수 있습니다. 이는 파일 시스템 레벨에서 두 수준 위에 있더라도 사진 라우트가 세그먼트 수준에서 하나 위에 있다는 것을 의미합니다.

다른 예제로는 상단 네비게이션 바에서 로그인 모달을 열고 동시에 별도의 /login 페이지를 갖는다거나, 쇼핑 카트를 사이드 모달에서 열 수 있습니다.

Intercepted and Parallel Routes를 사용한 모달 예제를 확인하세요.

## 도대체 왜 라우트 가로채기 같은걸 하는거임? 왜 병렬 라우팅을 왜 하는거냐고

라우트 가로채기(Intercepting Routes)와 병렬 라우팅(Parallel Routes)는 웹 애플리케이션에서 다양한 사용 사례에 따라 사용되며, 이 두 가지를 사용하는 주요 이유는 다음과 같습니다:

**라우트 가로채기(Intercepting Routes)를 사용하는 이유:**

1. **사용자 경험 개선**: 라우트 가로채기를 사용하면 사용자가 현재 화면 또는 페이지를 떠나지 않고도 추가 정보를 표시할 수 있습니다. 이것은 사용자의 경험을 향상시키고 페이지 이동을 피할 수 있습니다.

2. **네비게이션 일관성 유지**: 사용자가 현재 컨텍스트를 유지한 채로 콘텐츠를 표시할 수 있으므로 네비게이션 일관성이 유지됩니다. 사용자는 다른 페이지로 이동하지 않으면서 필요한 정보를 확인하거나 작업을 수행할 수 있습니다.

3. **복잡한 UI 관리**: 웹 애플리케이션은 종종 다양한 컴포넌트와 상호작용을 포함하며, 이를 관리하려면 라우트 가로채기가 유용할 수 있습니다. 예를 들어, 모달, 팝업, 오버레이 또는 다른 컨텐츠를 효과적으로 관리할 수 있습니다.

4. **URL 공유 및 북마크**: 라우트 가로채기를 사용하면 모달 또는 오버레이 내에서 표시된 특정 콘텐츠에 대한 URL을 공유하거나 북마크할 수 있습니다. 이로써 사용자가 나중에 해당 콘텐츠로 쉽게 이동할 수 있습니다.

**병렬 라우팅(Parallel Routes)을 사용하는 이유:**

1. **효율적인 페이지 렌더링**: 병렬 라우팅을 사용하면 여러 페이지를 동시에 렌더링할 수 있습니다. 이것은 대시보드, 소셜 미디어 피드 또는 다른 동적인 섹션에서 여러 페이지를 효과적으로 관리하는 데 유용합니다.

2. **커스텀 에러 및 로딩 상태**: 각 라우트에 대해 독립적인 오류 및 로딩 상태를 정의할 수 있습니다. 이로써 사용자에게 더 나은 상태 관리와 오류 처리를 제공할 수 있습니다.

3. **조건부 렌더링**: 병렬 라우팅을 사용하면 조건부 렌더링을 구현할 수 있습니다. 예를 들어, 인증 상태에 따라 다른 라우트를 렌더링할 수 있으므로 사용자에게 맞춤화된 경험을 제공할 수 있습니다.

4. **모달 및 오버레이**: 병렬 라우팅은 모달 또는 오버레이를 렌더링하는 데 사용될 수 있습니다. 이로써 사용자는 모달 창 내에서 추가 정보를 확인하거나 작업할 수 있습니다.

두 가지 기술은 웹 애플리케이션의 다양한 요구 사항과 사용 사례를 다루는 데 유용하며, 사용자 경험을 향상시키고 페이지 이동과 콘텐츠 표시를 효과적으로 관리합니다. 선택한 기술은 앱의 목적과 요구 사항에 따라 달라질 수 있습니다.
